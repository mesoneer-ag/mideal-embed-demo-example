{"ast":null,"code":"export default class MidealEmbed {\n  start({\n    ubiIdEndpoint,\n    enclosingDomElement,\n    style,\n    onMessage\n  }) {\n    const iframes = enclosingDomElement.getElementsByTagName('iframe');\n    for (const item of iframes) {\n      item.remove();\n    }\n    const iframe = document.createElement('iframe');\n    iframe.setAttribute('id', 'ubiid-embedded');\n    iframe.setAttribute('allow', 'camera;microphone');\n    iframe.setAttribute('allowFullscreen', 'true');\n    iframe.setAttribute('allowtransparency', 'true');\n    iframe.setAttribute('src', ubiIdEndpoint);\n    iframe.setAttribute('width', '100%');\n    iframe.setAttribute('height', '850px');\n    iframe.setAttribute('frameborder', '0');\n    if (style) {\n      iframe.setAttribute('width', style.width);\n      iframe.setAttribute('height', style.height);\n    }\n    enclosingDomElement.appendChild(iframe);\n    const discardEvent = _ => {};\n    onMessage = onMessage || discardEvent;\n    const fromUbiId = event => event.origin === new URL(ubiIdEndpoint).origin;\n    const listenerId = Date.now();\n    const listener = event => {\n      event.preventDefault();\n      console.log({\n        'ubiId.DEBUG': event,\n        listenerId\n      });\n      if (fromUbiId(event)) {\n        const {\n          scanResult,\n          signingResult,\n          signingErrors,\n          statusReason,\n          statusDetails,\n          date\n        } = JSON.parse(event.data);\n        if (onMessage) {\n          onMessage({\n            scanResult,\n            signingResult,\n            signingErrors,\n            statusReason,\n            statusDetails,\n            date\n          });\n        }\n      } else {\n        console.warn({\n          'ubiId.Ignored': event,\n          listenerId\n        });\n      }\n    };\n    window.addEventListener('message', listener, {\n      once: true\n    });\n  }\n}","map":{"version":3,"names":["MidealEmbed","start","ubiIdEndpoint","enclosingDomElement","style","onMessage","iframes","getElementsByTagName","item","remove","iframe","document","createElement","setAttribute","width","height","appendChild","discardEvent","_","fromUbiId","event","origin","URL","listenerId","Date","now","listener","preventDefault","console","log","scanResult","signingResult","signingErrors","statusReason","statusDetails","date","JSON","parse","data","warn","window","addEventListener","once"],"sources":["/Users/nguyenvantai/Documents/ubiid/mideal-embed-demo-example/examples/mideal-embedding-angular/node_modules/@mesoneer-ag/mideal-embed-dev/dist/types/mideal-embed.js"],"sourcesContent":["export default class MidealEmbed {\n    start({ ubiIdEndpoint, enclosingDomElement, style, onMessage, }) {\n        const iframes = enclosingDomElement.getElementsByTagName('iframe');\n        for (const item of iframes) {\n            item.remove();\n        }\n        const iframe = document.createElement('iframe');\n        iframe.setAttribute('id', 'ubiid-embedded');\n        iframe.setAttribute('allow', 'camera;microphone');\n        iframe.setAttribute('allowFullscreen', 'true');\n        iframe.setAttribute('allowtransparency', 'true');\n        iframe.setAttribute('src', ubiIdEndpoint);\n        iframe.setAttribute('width', '100%');\n        iframe.setAttribute('height', '850px');\n        iframe.setAttribute('frameborder', '0');\n        if (style) {\n            iframe.setAttribute('width', style.width);\n            iframe.setAttribute('height', style.height);\n        }\n        enclosingDomElement.appendChild(iframe);\n        const discardEvent = (_) => { };\n        onMessage = onMessage || discardEvent;\n        const fromUbiId = (event) => event.origin === new URL(ubiIdEndpoint).origin;\n        const listenerId = Date.now();\n        const listener = (event) => {\n            event.preventDefault();\n            console.log({\n                'ubiId.DEBUG': event,\n                listenerId,\n            });\n            if (fromUbiId(event)) {\n                const { scanResult, signingResult, signingErrors, statusReason, statusDetails, date, } = JSON.parse(event.data);\n                if (onMessage) {\n                    onMessage({\n                        scanResult,\n                        signingResult,\n                        signingErrors,\n                        statusReason,\n                        statusDetails,\n                        date,\n                    });\n                }\n            }\n            else {\n                console.warn({\n                    'ubiId.Ignored': event,\n                    listenerId,\n                });\n            }\n        };\n        window.addEventListener('message', listener, { once: true });\n    }\n}\n"],"mappings":"AAAA,eAAe,MAAMA,WAAW,CAAC;EAC7BC,KAAK,CAAC;IAAEC,aAAa;IAAEC,mBAAmB;IAAEC,KAAK;IAAEC;EAAW,CAAC,EAAE;IAC7D,MAAMC,OAAO,GAAGH,mBAAmB,CAACI,oBAAoB,CAAC,QAAQ,CAAC;IAClE,KAAK,MAAMC,IAAI,IAAIF,OAAO,EAAE;MACxBE,IAAI,CAACC,MAAM,EAAE;IACjB;IACA,MAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IAC/CF,MAAM,CAACG,YAAY,CAAC,IAAI,EAAE,gBAAgB,CAAC;IAC3CH,MAAM,CAACG,YAAY,CAAC,OAAO,EAAE,mBAAmB,CAAC;IACjDH,MAAM,CAACG,YAAY,CAAC,iBAAiB,EAAE,MAAM,CAAC;IAC9CH,MAAM,CAACG,YAAY,CAAC,mBAAmB,EAAE,MAAM,CAAC;IAChDH,MAAM,CAACG,YAAY,CAAC,KAAK,EAAEX,aAAa,CAAC;IACzCQ,MAAM,CAACG,YAAY,CAAC,OAAO,EAAE,MAAM,CAAC;IACpCH,MAAM,CAACG,YAAY,CAAC,QAAQ,EAAE,OAAO,CAAC;IACtCH,MAAM,CAACG,YAAY,CAAC,aAAa,EAAE,GAAG,CAAC;IACvC,IAAIT,KAAK,EAAE;MACPM,MAAM,CAACG,YAAY,CAAC,OAAO,EAAET,KAAK,CAACU,KAAK,CAAC;MACzCJ,MAAM,CAACG,YAAY,CAAC,QAAQ,EAAET,KAAK,CAACW,MAAM,CAAC;IAC/C;IACAZ,mBAAmB,CAACa,WAAW,CAACN,MAAM,CAAC;IACvC,MAAMO,YAAY,GAAIC,CAAC,IAAK,CAAE,CAAC;IAC/Bb,SAAS,GAAGA,SAAS,IAAIY,YAAY;IACrC,MAAME,SAAS,GAAIC,KAAK,IAAKA,KAAK,CAACC,MAAM,KAAK,IAAIC,GAAG,CAACpB,aAAa,CAAC,CAACmB,MAAM;IAC3E,MAAME,UAAU,GAAGC,IAAI,CAACC,GAAG,EAAE;IAC7B,MAAMC,QAAQ,GAAIN,KAAK,IAAK;MACxBA,KAAK,CAACO,cAAc,EAAE;MACtBC,OAAO,CAACC,GAAG,CAAC;QACR,aAAa,EAAET,KAAK;QACpBG;MACJ,CAAC,CAAC;MACF,IAAIJ,SAAS,CAACC,KAAK,CAAC,EAAE;QAClB,MAAM;UAAEU,UAAU;UAAEC,aAAa;UAAEC,aAAa;UAAEC,YAAY;UAAEC,aAAa;UAAEC;QAAM,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACjB,KAAK,CAACkB,IAAI,CAAC;QAC/G,IAAIjC,SAAS,EAAE;UACXA,SAAS,CAAC;YACNyB,UAAU;YACVC,aAAa;YACbC,aAAa;YACbC,YAAY;YACZC,aAAa;YACbC;UACJ,CAAC,CAAC;QACN;MACJ,CAAC,MACI;QACDP,OAAO,CAACW,IAAI,CAAC;UACT,eAAe,EAAEnB,KAAK;UACtBG;QACJ,CAAC,CAAC;MACN;IACJ,CAAC;IACDiB,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAEf,QAAQ,EAAE;MAAEgB,IAAI,EAAE;IAAK,CAAC,CAAC;EAChE;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}