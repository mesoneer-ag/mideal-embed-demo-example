{"ast":null,"code":"var ScanResult;\n(function (ScanResult) {\n  ScanResult[\"NO_STATUS\"] = \"NO_SATTUS\";\n  ScanResult[\"IDENTIFICATION_SUCCESSFUL\"] = \"IDENTIFICATION_SUCCESSFUL\";\n  ScanResult[\"IDENTIFICATION_FAILED\"] = \"IDENTIFICATION_FAILED\";\n  ScanResult[\"TIMEOUT\"] = \"TIMEOUT\";\n})(ScanResult || (ScanResult = {}));\nvar SigningStatus;\n(function (SigningStatus) {\n  SigningStatus[\"NO_SIGNING\"] = \"NO_SIGNING\";\n  SigningStatus[\"SIGNING_SUCCESSFUL\"] = \"SIGNING_SUCCESSFUL\";\n})(SigningStatus || (SigningStatus = {}));\nexport default class MidealEmbed {\n  start({\n    startUrl,\n    enclosingDomElement,\n    style,\n    onMessage\n  }) {\n    const iframes = enclosingDomElement.getElementsByTagName('iframe');\n    for (const item of iframes) {\n      item.remove();\n    }\n    const iframe = document.createElement('iframe');\n    iframe.setAttribute('id', 'mideal-embedded');\n    iframe.setAttribute('allow', 'camera;microphone');\n    iframe.setAttribute('allowFullscreen', 'true');\n    iframe.setAttribute('allowtransparency', 'true');\n    iframe.setAttribute('src', startUrl);\n    iframe.setAttribute('width', '100%');\n    iframe.setAttribute('height', '850px');\n    iframe.setAttribute('frameborder', '0');\n    if (style) {\n      iframe.setAttribute('width', style.width);\n      iframe.setAttribute('height', style.height);\n    }\n    enclosingDomElement.appendChild(iframe);\n    const fromMideal = event => event.origin === new URL(startUrl).origin;\n    const listenerId = Date.now();\n    const listener = event => {\n      event.preventDefault();\n      console.log({\n        'mideal.DEBUG': event,\n        listenerId\n      });\n      if (fromMideal(event)) {\n        const {\n          scanResult,\n          signingResult,\n          signingErrors,\n          statusReason,\n          statusDetails,\n          date\n        } = JSON.parse(event.data);\n        if (onMessage) {\n          onMessage({\n            scanResult,\n            signingResult,\n            signingErrors,\n            statusReason,\n            statusDetails,\n            date\n          });\n        }\n      } else {\n        console.warn({\n          'mideal.Ignored': event,\n          listenerId\n        });\n      }\n    };\n    window.addEventListener('message', listener, {\n      once: true\n    });\n  }\n}","map":{"version":3,"names":["ScanResult","SigningStatus","MidealEmbed","start","startUrl","enclosingDomElement","style","onMessage","iframes","getElementsByTagName","item","remove","iframe","document","createElement","setAttribute","width","height","appendChild","fromMideal","event","origin","URL","listenerId","Date","now","listener","preventDefault","console","log","scanResult","signingResult","signingErrors","statusReason","statusDetails","date","JSON","parse","data","warn","window","addEventListener","once"],"sources":["/Users/nguyenvantai/Documents/ubiid/mideal-embed-demo-example/examples/mideal-embedding-angular/node_modules/@mesoneer-ag/mideal-embed-dev/dist/types/mideal-embed.js"],"sourcesContent":["var ScanResult;\n(function (ScanResult) {\n    ScanResult[\"NO_STATUS\"] = \"NO_SATTUS\";\n    ScanResult[\"IDENTIFICATION_SUCCESSFUL\"] = \"IDENTIFICATION_SUCCESSFUL\";\n    ScanResult[\"IDENTIFICATION_FAILED\"] = \"IDENTIFICATION_FAILED\";\n    ScanResult[\"TIMEOUT\"] = \"TIMEOUT\";\n})(ScanResult || (ScanResult = {}));\nvar SigningStatus;\n(function (SigningStatus) {\n    SigningStatus[\"NO_SIGNING\"] = \"NO_SIGNING\";\n    SigningStatus[\"SIGNING_SUCCESSFUL\"] = \"SIGNING_SUCCESSFUL\";\n})(SigningStatus || (SigningStatus = {}));\nexport default class MidealEmbed {\n    start({ startUrl, enclosingDomElement, style, onMessage, }) {\n        const iframes = enclosingDomElement.getElementsByTagName('iframe');\n        for (const item of iframes) {\n            item.remove();\n        }\n        const iframe = document.createElement('iframe');\n        iframe.setAttribute('id', 'mideal-embedded');\n        iframe.setAttribute('allow', 'camera;microphone');\n        iframe.setAttribute('allowFullscreen', 'true');\n        iframe.setAttribute('allowtransparency', 'true');\n        iframe.setAttribute('src', startUrl);\n        iframe.setAttribute('width', '100%');\n        iframe.setAttribute('height', '850px');\n        iframe.setAttribute('frameborder', '0');\n        if (style) {\n            iframe.setAttribute('width', style.width);\n            iframe.setAttribute('height', style.height);\n        }\n        enclosingDomElement.appendChild(iframe);\n        const fromMideal = (event) => event.origin === new URL(startUrl).origin;\n        const listenerId = Date.now();\n        const listener = (event) => {\n            event.preventDefault();\n            console.log({\n                'mideal.DEBUG': event,\n                listenerId,\n            });\n            if (fromMideal(event)) {\n                const { scanResult, signingResult, signingErrors, statusReason, statusDetails, date, } = JSON.parse(event.data);\n                if (onMessage) {\n                    onMessage({\n                        scanResult,\n                        signingResult,\n                        signingErrors,\n                        statusReason,\n                        statusDetails,\n                        date,\n                    });\n                }\n            }\n            else {\n                console.warn({\n                    'mideal.Ignored': event,\n                    listenerId,\n                });\n            }\n        };\n        window.addEventListener('message', listener, { once: true });\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}